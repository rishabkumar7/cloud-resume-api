"use strict";var _a,_b,_c,_d,_e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeyValueStore=exports.InlineImportSource=exports.AssetImportSource=exports.S3ImportSource=exports.ImportSource=void 0;var jsiiDeprecationWarnings=()=>{var tmp=require("../../.warnings.jsii.js");return jsiiDeprecationWarnings=()=>tmp,tmp};const JSII_RTTI_SYMBOL_1=Symbol.for("jsii.rtti");var fs=()=>{var tmp=require("fs");return fs=()=>tmp,tmp},path_1=()=>{var tmp=require("path");return path_1=()=>tmp,tmp},cloudfront_generated_1=()=>{var tmp=require("./cloudfront.generated");return cloudfront_generated_1=()=>tmp,tmp},s3_assets=()=>{var tmp=require("../../aws-s3-assets");return s3_assets=()=>tmp,tmp},core_1=()=>{var tmp=require("../../core");return core_1=()=>tmp,tmp};class ImportSource{static fromBucket(bucket,key){try{jsiiDeprecationWarnings().aws_cdk_lib_aws_s3_IBucket(bucket)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.fromBucket),error}return new S3ImportSource(bucket,key)}static fromAsset(path,options){try{jsiiDeprecationWarnings().aws_cdk_lib_aws_s3_assets_AssetOptions(options)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.fromAsset),error}return new AssetImportSource(path,options)}static fromInline(data){return new InlineImportSource(data)}}exports.ImportSource=ImportSource,_a=JSII_RTTI_SYMBOL_1,ImportSource[_a]={fqn:"aws-cdk-lib.aws_cloudfront.ImportSource",version:"2.150.0"};class S3ImportSource extends ImportSource{constructor(bucket,key){super(),this.bucket=bucket,this.key=key;try{jsiiDeprecationWarnings().aws_cdk_lib_aws_s3_IBucket(bucket)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,S3ImportSource),error}}_bind(_scope){return{sourceType:"S3",sourceArn:`${this.bucket.arnForObjects(this.key)}`}}}exports.S3ImportSource=S3ImportSource,_b=JSII_RTTI_SYMBOL_1,S3ImportSource[_b]={fqn:"aws-cdk-lib.aws_cloudfront.S3ImportSource",version:"2.150.0"};class AssetImportSource extends ImportSource{constructor(path,options={}){super(),this.path=path,this.options=options;try{jsiiDeprecationWarnings().aws_cdk_lib_aws_s3_assets_AssetOptions(options)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,AssetImportSource),error}}_bind(scope){if(!this.asset)this.asset=new(s3_assets()).Asset(scope,"ImportSource",{path:this.path,deployTime:!0,...this.options});else if(core_1().Stack.of(this.asset)!==core_1().Stack.of(scope))throw new Error(`Asset is already associated with another stack '${core_1().Stack.of(this.asset).stackName}. Create a new ImportSource instance for every stack.`);return{sourceType:"S3",sourceArn:this.asset.bucket.arnForObjects(this.asset.s3ObjectKey)}}}exports.AssetImportSource=AssetImportSource,_c=JSII_RTTI_SYMBOL_1,AssetImportSource[_c]={fqn:"aws-cdk-lib.aws_cloudfront.AssetImportSource",version:"2.150.0"};class InlineImportSource extends ImportSource{constructor(data){super(),this.data=data}_bind(scope){if(this.asset){if(core_1().Stack.of(this.asset)!==core_1().Stack.of(scope))throw new Error(`Asset is already associated with another stack '${core_1().Stack.of(this.asset).stackName}. Create a new ImportSource instance for every stack.`)}else{const workdir=core_1().FileSystem.mkdtemp("key-value-store"),outputPath=(0,path_1().join)(workdir,"data.json");fs().writeFileSync(outputPath,this.data),this.asset=new(s3_assets()).Asset(scope,"ImportSource",{path:outputPath,deployTime:!0})}return{sourceType:"S3",sourceArn:this.asset.bucket.arnForObjects(this.asset.s3ObjectKey)}}}exports.InlineImportSource=InlineImportSource,_d=JSII_RTTI_SYMBOL_1,InlineImportSource[_d]={fqn:"aws-cdk-lib.aws_cloudfront.InlineImportSource",version:"2.150.0"};class KeyValueStore extends core_1().Resource{static fromKeyValueStoreArn(scope,id,keyValueStoreArn){const storeId=core_1().Arn.split(keyValueStoreArn,core_1().ArnFormat.SLASH_RESOURCE_NAME).resourceName;if(!storeId)throw new Error(`Invalid Key Value Store Arn: '${keyValueStoreArn}'`);return new class extends core_1().Resource{constructor(){super(scope,id,{environmentFromArn:keyValueStoreArn}),this.keyValueStoreArn=keyValueStoreArn,this.keyValueStoreId=storeId}get keyValueStoreStatus(){throw new Error("Status is not available for imported Key Value Store")}}}constructor(scope,id,props){super(scope,id,{physicalName:props?.keyValueStoreName??core_1().Lazy.string({produce:()=>core_1().Names.uniqueResourceName(this,{maxLength:64})})});try{jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudfront_KeyValueStoreProps(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,KeyValueStore),error}const resource=new(cloudfront_generated_1()).CfnKeyValueStore(this,"Resource",{name:this.physicalName,comment:props?.comment,importSource:props?.source?._bind(this)});this.keyValueStoreArn=resource.attrArn,this.keyValueStoreId=resource.attrId,this.keyValueStoreStatus=resource.attrStatus}}exports.KeyValueStore=KeyValueStore,_e=JSII_RTTI_SYMBOL_1,KeyValueStore[_e]={fqn:"aws-cdk-lib.aws_cloudfront.KeyValueStore",version:"2.150.0"};
